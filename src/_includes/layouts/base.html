<!DOCTYPE html>
<html lang="en">
<head>
    {% include "parts/basehead.html" %}
</head>
<body class="flex flex-col min-h-screen bg-zinc-100 dark:bg-zinc-800 text-gray-900 dark:text-gray-100 fade-in">

    {% include "parts/nav.html" %}

    <div class="prose mx-4 sm:mx-8 md:mx-16 lg:mx-40 max-w-none text-justify flex-grow dark:text-gray-100">
        {{content | safe}} 
    </div>

    <br>
    <!-- anything that is content for whatever that is using  
    this page it is safe to pass in this body-->
    {% include "parts/footer.html" %}   




    <script>
        // Function to check if dark mode is enabled
        function isDarkMode() {
            const isDark = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            console.log('isDarkMode check:', isDark);  // Debugging line
            return isDark;
        }
    
        // Function to apply the theme with smooth transition when toggled manually
        function applyTheme(dark, isManualToggle = false) {
            if (isManualToggle) {
                document.documentElement.classList.add('transition-colors', 'duration-500');
            } else {
                document.documentElement.classList.remove('transition-colors', 'duration-500');
            }
    
            if (dark) {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';  // Store theme preference
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';  // Store theme preference
            }
    
            // Debugging line to confirm the theme application
            console.log('Applied theme:', dark ? 'dark' : 'light');
        }
    
        // Apply theme based on saved preference (no transition on load)
        document.addEventListener('DOMContentLoaded', () => {
            const currentTheme = isDarkMode();
            applyTheme(currentTheme, false);  // Apply theme on page load
        });
    
        // Event listener for dark mode toggle
        document.getElementById("toggleDarkMode").addEventListener("click", function() {
            const darkModeEnabled = !isDarkMode();  // Toggle between dark and light
            applyTheme(darkModeEnabled, true);  // Apply theme with animation
    
            // Change the icon with a fade-in/out animation
            this.classList.add('fade-out');
            setTimeout(() => {
                this.textContent = darkModeEnabled ? "dark_mode" : "light_mode";  // Switch icon text
                this.classList.remove('fade-out');
                this.classList.add('fade-in');
                setTimeout(() => {
                    this.classList.remove('fade-in');
                }, 500);  // Animation duration
            }, 250);  // Short delay before changing the icon
        });
    </script>
    



</body>
</html>
<!-- Hello there! -->
